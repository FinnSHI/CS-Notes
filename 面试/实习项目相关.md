# 实习项目相关

## 项目内容





## 面试题

### Docker日志

`docker-compose logs -f --tail=100 `：实时监控末尾100行的日志

### debezium 监控 MySQL，需要开启什么配置

mysql 是通过开启 binlog 的形式，然后 debezium 可以直接读取 binlog

#### MySQL如何查看binlog是否开启

`show variables like 'log_%'`;

![image-20220713150842609](https://finn-typora.oss-cn-shanghai.aliyuncs.com/pic/202207131508652.png)

#### Mysql如何开启binlog

1. 找到mysql的配置文件：`locate xxx`

![image-20220713151630356](https://finn-typora.oss-cn-shanghai.aliyuncs.com/pic/202207131516396.png)



- 对于mysql 5.7以下的版本
  - 直接指定log_bin的存放目录即可

- 对于mysql 5.7以上的版本

  - 还要指定 server-id

    ```mysql
    [mysqld]
    server-id = 223344
    log_bin = mysql-bin
    binlog_format = ROW
    binlog_row_image = FULL
    expire_logs_days = 2
    ```

    



### debezium监控PG，需要开启什么配置

- pg 和 mysql 不一样，pg 9.4之后加入了 logical decoding 功能，允许提取提交到事务日志的更改，并在输出插件的帮助下以用户友好的方式处理这些更改。

  - logical decoding 是9.4以后添加的功能。PG 9.4 以后，且10之前的版本，需要安装 logical decoding 插件。

  - 至于 PG 10+的版本，这个插件已经内置安装了。

  - logical decoding 不支持 DDL 变更。

    ![image-20220713145326358](https://finn-typora.oss-cn-shanghai.aliyuncs.com/pic/202207131453465.png)

- 开启logical decoding

  ![image-20220713150553746](https://finn-typora.oss-cn-shanghai.aliyuncs.com/pic/202207131505788.png)

  - `wal_level` 通知数据库使用 logical decoding 读取预写日志

    - logical 用 logical decoding 读取预写日志
    - minimal 是默认的值，它仅写入崩溃或者突发关机时所需要的信息（不建议使用）。
    - archive 是增加 wal 归档所需的日志（最常用）。

    - hot_standby是在备用服务器上增加了运行只读查询所需的信息，一般实在流复制的时候使用到。

  - `max_wal_senders` 通知数据库独立处理WAL变更的独立进程数量

  - `max_replication_slots` 通知数据库处理WAL变更流所允许最大replication slots数目

- 给 debezium 配置相应的权限用户，debezium 可以读取到相应的内容，从而监控到数据变化。





### Kafka

#### kafka为什么不会丢失数据

- kafka在接受到数据后，会把数据保存在硬盘中。
- 在用户进行消费时

#### kafka为什么那么快





#### Kafka和RabbitMQ的区别